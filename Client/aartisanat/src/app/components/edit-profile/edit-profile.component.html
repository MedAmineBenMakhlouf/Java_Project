<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div id="hover-trigger"></div>
    <div id="sidebar">
        <div class="p-4 header-container">
            <img src="./../../../assets/images/logo.png" alt="logo" class="sidebar-logo mb-3">
            <span class="site-name retro-groovy">MAGESTIC SOUK</span>
            <div class="list-group mt-1">
                <div class="activeinterface">
                    <a role="button" (click)="dashboardUser()" class="list-group-item text-only mt-3 ms-2 ">
                        <img src="./../../../assets/images/iconbuyer.webp" alt="User Interface"
                            class="sidebar-icon rounded-pill border">
                        <span>USER INTERFACE</span>
                    </a>
                </div>
                <div class="">
                    <a role="button" (click)="dashboardSeller()" class="list-group-item text-only mt-3 ms-2">
                        <img src="./../../../assets/images/seller.webp" alt="Seller Interface"
                            class="sidebar-icon rounded-pill border">
                        <span>SELLER INTERFACE</span>
                    </a>
                </div>
            </div>
        </div>
        <div class="list-group-item text-only logout">
            <a href="#" class="list-group-item text-only">
                <i class="fas fa-sign-out-alt sidebar-icon" style="font-size: 100px; display: block; margin: auto;"></i>
            </a>
            <span role="button" (click)="logout()">LOGOUT</span>
        </div>
    </div>



    <div class="container-xl mt-4">
        <!-- Account page navigation-->
        <nav class="nav nav-borders">
            <a class="nav-link active ms-0 " href="" target="_blank">Profile</a>
            <a class="nav-link " role="button"   (click)="goToBuyerHistory()" target="_blank">Buyer history</a>
            <a class="nav-link" role="button" (click)="goToSellerHistory()" target="_blank">Seller History</a>
 
        </nav>
        <hr class="mt-0 mb-4">
        <div class="row">
            <div class="col-xl-4">
                <!-- Profile picture card-->
                <div class="card mb-4 mb-xl-0">
                    <div class="card-header">Profile Picture</div>
                    <div class="card-body text-center">
                        <!-- Profile picture image-->
                        <img class="img-account-profile rounded-circle mb-2"
                            [src]="'http://localhost:8080/uploads/' + user.user.file_path" alt="Profile Image" />
                        <!-- Profile picture help block-->
                        <div class="small font-italic text-muted mb-4">JPG or PNG no larger than 5 MB</div>
                        <!-- Profile picture upload button-->
                        <!-- Button trigger modal -->
                        <form (ngSubmit)="editPicture()">
                            <input input type="file" class="form-control" name="file" accept=".jpg, .jpeg, .png"
                                (change)="onFileSelected($event)">
                            <button class="btn btn-primary mt-2" type="submit">Upload new image</button>
                        </form>

                        <!-- Modal -->
                        <form (ngSubmit)="editPicture()" #userForm="ngForm">
                            <div class="modal fade" id="uploadModal" tabindex="-1" aria-labelledby="uploadModalLabel"
                                aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="uploadModalLabel">Upload Profile Image</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            <input input type="file" class="form-control" name="file"
                                                accept=".jpg, .jpeg, .png" (change)="onFileSelected($event)">
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-bs-dismiss="modal">Close</button>
                                            <button type="submit" class="btn btn-primary">Upload</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-xl-8">
                <div class="card mb-4">
                    <div class="card-header">Account Details</div>
                    <div class="card-body">
                        <form (ngSubmit)="editInfo()">
                            <div class="mb-3">
                                <label class="small mb-1" for="inputUsername">Full name</label>
                                <input class="form-control" id="inputUsername" type="text" value=user.username
                                    placeholder="Enter your username" [(ngModel)]="user.user.username" name="username">
                            </div>

                            <div class="row gx-3 mb-3">
                                <div class="col-md-6">
                                    <input class="form-control" id="inputOrgName" type="hidden"
                                        [(ngModel)]="user.user.email" [value]="user.user.email" name="email">
                                </div>
                                <div class="col-md-6">
                                    <input class="form-control" id="inputOrgName" type="hidden"
                                        [(ngModel)]="user.user.id" [value]="user.user.id" name="id">
                                </div>
                                <div class="col-md-6">
                                    <label class="small mb-1" for="inputLocation">Phone</label>
                                    <input class="form-control" id="inputLocation" [(ngModel)]="user.user.phone"
                                        type="text" placeholder="Enter your phone number" name="phone">
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="small mb-1" for="inputUsername">Address</label>
                                <input class="form-control" id="inputUsername" type="text"
                                    placeholder="Enter your adsress" [(ngModel)]="user.user.address" name="address">
                            </div>
                            <button class="btn btn-primary" type="submit">Save changes</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>